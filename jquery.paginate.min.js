/**
 * jQuery Paginate
 *
 * Source: https://github.com/vmichnowicz/jquery.paginate
 * Example: http://www.vmichnowicz.com/examples/paginate/index.html
 *
 * @author Victor Michnowicz
 * @copyright (c) 2011, Victor Michnowicz (http://www.vmichnowicz.com/)
 * @url https://github.com/vmichnowicz/jquery.paginate
 */
(function($){$.fn.findAndSelf=function(selector){return this.find(selector).add(this.filter(selector))}
$.fn.paginate=function(options){var settings=$.extend({controls:$('#pagination_controls'),controlNext:$('<a href="javascript:void(0);" class="next">Next &rsaquo;</a>'),controlFirst:$('<a href="javascript:void(0);" class="first">&laquo; First</a>'),controlPrev:$('<a href="javascript:void(0);" class="prev">&lsaquo; Previous</a>'),controlLast:$('<a href="javascript:void(0);" class="last">Last &raquo;</a>'),controlPage:$('<a href="javascript:void(0);" class="page"></a>'),controlPagesVisible:5,items:null,status:$('#pagination_status'),statusTemplate:$('<p>Viewing items <em class="first_page_item">{0}</em> - <em class="last_page_item">{1}</em> of <em class="total_items">{2}</em></p>'),itemsPerPage:10,itemsPerPageOptions:[5,10,15,25,50,'Show All'],controlOptions:$('<span class="items_per_page"><label for="items_per_page">Items per page:</label> <select name="items_per_page" id="items_per_page"></select></span>'),currentPage:0,classDisabled:'disabled',classCurrent:'current',_goFirst:function(P){if(P.currentPage!==0){P.currentPage=0;P.prevPage=null;P.nextPage=P.numPages>0?P.currentPage+1:null;P=settings._buildPages(P);P=settings._buildStyles(P);}
return P;},_goPrev:function(P){if(P.prevPage!==null){P.nextPage=P.currentPage;P.currentPage=P.prevPage;P.prevPage=P.currentPage>0?P.currentPage-1:null;P=settings._buildPages(P);P=settings._buildStyles(P);}
return P;},_goPage:function(P,page){if(P.pages[page]){P.currentPage=page;P.nextPage=P.numPages===P.currentPage+1?null:P.currentPage+1;P.prevPage=P.currentPage>0?P.currentPage-1:null;P=settings._buildPages(P);P=settings._buildStyles(P);}
return P;},_goNext:function(P){if(P.nextPage!==null){P.prevPage=P.currentPage;P.currentPage=P.nextPage;P.nextPage=P.numPages===P.currentPage+1?null:P.currentPage+1;P=settings._buildPages(P);P=settings._buildStyles(P);}
return P;},_goLast:function(P){if(P.currentPage!==P.numPages-1){P.currentPage=P.numPages-1;P.prevPage=P.currentPage>0?P.currentPage-1:null;P.nextPage=null;;P=settings._buildPages(P);P=settings._buildStyles(P);}
return P;},_buildPages:function(P){P.numPages=P.itemsPerPage===null?1:Math.ceil(P.numItems/P.itemsPerPage);P.prevPage=P.currentPage===0?null:P.currentPage-1;P.nextPage=(P.currentPage+1)<P.numPages?P.currentPage+1:null;P.lastPage=P.numPages-1;P.pages=[];$(P.items).each(function(index,item){var page=P.itemsPerPage===null?0:Math.floor(index/P.itemsPerPage);if(!P.pages[page]){P.pages[page]=[];}
P.pages[page].push(index);});$(P.items).hide();var currentItems=P.pages[P.currentPage];for(var i=0;i<currentItems.length;i++){$(P.items).eq(currentItems[i]).show();}
if(settings.status&&P.statusTemplate){var statusText=settings.statusTemplate.html();statusText=statusText.replace('{0}',P.pages[P.currentPage][0]+1);statusText=statusText.replace('{1}',P.pages[P.currentPage][P.pages[P.currentPage].length-1]+1);statusText=statusText.replace('{2}',P.numItems);P.statusTemplate=settings.statusTemplate.clone(false).html(statusText);settings.status.html(P.statusTemplate);}
return P;},_buildStyles:function(P){if(P.controls){for(control in P.controls){if(control!=='pages'){P.controls[control].removeClass(settings.classDisabled);}}
if(P.currentPage===0){P.controls.first.addClass(settings.classDisabled);P.controls.prev.addClass(settings.classDisabled);}
if(P.currentPage===P.numPages-1){P.controls.last.addClass(settings.classDisabled);P.controls.next.addClass(settings.classDisabled);}
var down=Math.floor(settings.controlPagesVisible/2);var up=Math.max(settings.controlPagesVisible-down-1,0);var a=Math.max(P.currentPage-down-(P.numPages-1<P.currentPage+up?P.currentPage+up+1-P.numPages:0),0);var b=P.currentPage+up+(P.currentPage<down?down-P.currentPage:0);$(P.controls.pages).each(function(index,page){$(page).findAndSelf('a').removeClass(settings.classCurrent);index>=a&&index<=b?$(page).show():$(page).hide();if(index===P.currentPage){$(page).findAndSelf('a').addClass(settings.classCurrent);}});}
return P;},_buildControls:function(P){var options=$();if(settings.itemsPerPageOptions!==null&&settings.itemsPerPageOptions.length>0){options=settings.controlOptions.clone(false);for(var i=0;i<settings.itemsPerPageOptions.length;i++){var limit=settings.itemsPerPageOptions[i];var option=$('<option />').attr('value',typeof limit==='number'?limit:'').text(limit);if(typeof limit==='string'||(typeof limit==='number'&&limit<=P.items.length)){if(P.itemsPerPage==limit||(typeof limit==='string'&&P.itemsPerPage===null)){$(option).attr('selected',true);}
options.findAndSelf('select').append(option);}}
options.change(function(e){P.itemsPerPage=$(this).findAndSelf('select').val();P.itemsPerPage=P.itemsPerPage==''?null:parseInt(P.itemsPerPage);var itemPageFirst=P.pages[P.currentPage][0];P.currentPage=P.itemsPerPage==null?0:Math.floor((itemPageFirst+1)/P.itemsPerPage);P=settings._buildPages(P);P=settings._buildStyles(P);P=settings._buildControls(P);});}
var pages=$();for(var i=0;i<P.numPages;i++){var page=settings.controlPage.clone(false);page.findAndSelf('a').attr('href','#'+(i+1)).text(i+1);pages=pages.add(page);}
pages.click(function(e){e.preventDefault();var page=parseInt($(e.target).attr('href').replace('#',''))-1;P=settings._goPage(P,page);});P.controls={options:options,first:settings.controlFirst.clone(false),prev:settings.controlPrev.clone(false),pages:pages,next:settings.controlNext.clone(false),last:settings.controlLast.clone(false)}
P.controls.first.click(function(e){P=settings._goFirst(P);});P.controls.prev.click(function(e){P=settings._goPrev(P);});P.controls.next.click(function(e){P=settings._goNext(P);});P.controls.last.click(function(e){P=settings._goLast(P);});$(settings.controls).empty().append(P.controls.options,P.controls.first,P.controls.prev,P.controls.pages,P.controls.next,P.controls.last);P=settings._buildStyles(P);return P;}},options);return this.each(function(){var items=settings.items===null?$(this).children():$(this).find(settings.items);var numItems=$(items).length;var P={items:items,itemsPerPage:settings.itemsPerPage,numItems:numItems,numPages:null,pages:[],firstPage:0,lastPage:null,nextPage:null,prevPage:null,currentPage:settings.currentPage,controls:null,statusTemplate:settings.statusTemplate?settings.statusTemplate:null}
P=settings._buildPages(P);P=settings._buildControls(P);});}})(jQuery);